let btnLogIn; function setDOMObjects() { btnLogIn = $("#btnLogin") } function setFormData() { const e = {}, r = $("input"); for (let o of r) e[o.name] = o.value; return e } function logIn() { const e = setFormData(); $.ajax({ method: "POST", url: "/User/Login", data: e, success: function (e) { switch (e.Message) { case "Error": let r = createErrorMessageValidation(e.Errors); showAlert("danger", r); break; case "UserError": showAlert("danger", "There is a problem with the user, please verify email and password"); break; case "Authenticated": if (clearLocalStorage(), e.Role) { location.replace(`${location.origin}/Home/Main`); break } null !== e.PersonId ? location.replace(`${location.origin}/Person/Person?id=${e.PersonId}`) : (setDataUserId(e.User.UserId), setDataUserEmail(e.User.Email), location.replace(`${location.origin}/Person/Person`)) } }, error: function () { console.log("Error"), showAlert("danger", "An error has ocurred, please contact with the system administrator") } }) } $(document).ready(function () { setDOMObjects(), btnLogIn.click(function () { logIn() }) });